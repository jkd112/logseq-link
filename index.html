<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Przekierowanie</title>
    <script>
        window.onload = function() {
            const url = window.location.href;
            const parts = url.split('?');
            if (parts.length < 2) return;

            // Wyciągamy wszystko po znaku zapytania
            let target = decodeURIComponent(parts[1]);

            // Naprawa znaku zapytania wewnątrz linku Logseq (jeśli występuje)
            if (parts.length > 2) {
                target += "?" + parts.slice(2).join('?');
            }

            if (target.startsWith('logseq://') || target.startsWith('message://')) {
                // Metoda 1: Próba natychmiastowa
                window.location.replace(target);

                // Metoda 2: Rezerwowa po 300ms (dla Chrome)
                setTimeout(() => {
                    window.top.location.href = target;
                }, 300);
            }
        };
    </script>
</head>
<body>
    <div style="text-align:center; margin-top:50px; font-family:sans-serif;">
        <p>Przekierowywanie...</p>
        <button onclick="location.reload()" style="padding:10px">Spróbuj ponownie</button>
    </div>
</body>
</html>
